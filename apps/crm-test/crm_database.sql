-- Clients Table: Stores basic information about each client.
CREATE TABLE Clients (
    CODIGO_CLIENTE INT PRIMARY KEY,
    NOMBRE_CLIENTE VARCHAR(255),
    TIPO_PERSONA VARCHAR(50),
    ESTADO_CIVIL VARCHAR(50),
    EDAD INT,
    OCUPACION VARCHAR(255),
    DIRECCION_TRABAJO VARCHAR(255),
    INICIO_LABORES DATE,
    TIEMPO_TRABAJADO VARCHAR(100),
    HORARIO VARCHAR(100),
    NOMBRE_SUPERVISOR VARCHAR(255),
    NOMBRE_RRHH VARCHAR(255),
    PERSONA_EXPUESTA BOOLEAN,
    NIVEL VARCHAR(100),
    PERMITE_AVISOS BOOLEAN,
    INGRESOS_APROXIMADOS DECIMAL(18, 2),
    EGRESOS_APROXIMADOS DECIMAL(18, 2),
    CAPACIDAD_ENDEUDAMIENTO DECIMAL(18, 2),
    ESTA_ORGULLOSO_ACTIVIDADES BOOLEAN,
    ES_PROFESIONAL BOOLEAN,
    TIENE_DEPENDIENTE_ECONOMICO BOOLEAN,
    NO_DEPENDIENTES INT,
    CUENTA_BANCARIA VARCHAR(100),
    TIPO_CUENTA VARCHAR(100),
    BANCO VARCHAR(100),
    SUELDO DECIMAL(18, 2),
    FECHA_PROX_PAGO DATE,
    DEPARTAMENTO VARCHAR(100),
    MUNICIPIO VARCHAR(100),
    AFILIACION_IGSS VARCHAR(100),
    NUMERO_AFILIACION VARCHAR(100),
    APELLIDO_CASADA VARCHAR(100),
    TEL_EMERGENCIA VARCHAR(20),
    EMPRESA VARCHAR(255),
    TEL_EMPRESA VARCHAR(20),
    CORREO_ELECTRONICO VARCHAR(255),
    TELEFONO VARCHAR(20),
    CELULAR VARCHAR(20),
    FECHA_CREACION TIMESTAMP,
    FECHA_ACTUALIZACION TIMESTAMP,
    CREADO_POR VARCHAR(100),
    ACTUALIZADO_POR VARCHAR(100),
    CREADO_DESDE VARCHAR(100),
    ACTUALIZADO_DESDE VARCHAR(100)
);

-- Opportunities Table: Tracks sales opportunities associated with clients.
CREATE TABLE Opportunities (
    CODIGO_OPORTUNIDAD INT PRIMARY KEY,
    CODIGO_CLIENTE INT,
    AÑO INT,
    MONTO DECIMAL(18, 2),
    CANTIDAD INT,
    PRECIO_PRODUCTO DECIMAL(18, 2),
    SUMA DECIMAL(18, 2),
    DIA_GANADA INT,
    MES_GANADA INT,
    AÑO_GANADA INT,
    DIA_INICIO INT,
    MES_INICIO INT,
    AÑO_INICIO INT,
    TRIMESTRE INT,
    SEMESTRE INT,
    ESTADO VARCHAR(100),
    DESCRIPCION_SEGMENTO VARCHAR(255),
    CODIGO_VENDEDOR INT,
    NOMBRE_VENDEDOR VARCHAR(255),
    DESCRIPCION_CAMPANA VARCHAR(255),
    DESCRIPCION_MEDIO VARCHAR(255),
    DESCRIPCION_RAZON VARCHAR(255),
    DESCRIPCION_GRUPO VARCHAR(255),
    DESCRIPCION_SUBGRUPO VARCHAR(255),
    DESCRIPCION_PRODUCTO VARCHAR(255),
    DESCRIPCION_ETAPA VARCHAR(255),
    PORCENTAJE_ETAPA DECIMAL(5, 2),
    FOREIGN KEY (CODIGO_CLIENTE) REFERENCES Clients(CODIGO_CLIENTE)
);

-- Loans Table: Contains information about loans taken by clients.
CREATE TABLE Loans (
    ID INT PRIMARY KEY,
    CODIGO_CLIENTE INT,
    MONTO_SOLICITADO DECIMAL(18, 2),
    DESCRIPCION_TIPO_PRESTAMO VARCHAR(255),
    UTILIZACION_CREDITO VARCHAR(255),
    TIPO_INMUEBLE VARCHAR(100),
    DIRECCION_INMUEBLE VARCHAR(255),
    FINCA VARCHAR(100),
    FOLIO VARCHAR(100),
    LIBRO VARCHAR(100),
    DEPARTAMENTO_PRESTAMO VARCHAR(100),
    MUNICIPIO_PRESTAMO VARCHAR(100),
    ZONA VARCHAR(100),
    PORCENTAJE_SOBRE_GARANTIA DECIMAL(5, 2),
    HISTORICO_RGPI TEXT,
    UTILIZACION_DINERO VARCHAR(255),
    BANCARIZADO BOOLEAN,
    PLAZO INT,
    MONTO_GPS DECIMAL(18, 2),
    MONTO_SEGURO DECIMAL(18, 2),
    CUOTA_NIVELADA_APROX DECIMAL(18, 2),
    TIPO_CREDITO VARCHAR(100),
    NIVEL_PRESTAMO VARCHAR(100),
    CUOTA_NIVELADA_IDEAL DECIMAL(18, 2),
    DIFERENCIA_CUOTAS_NIVELADAS DECIMAL(18, 2),
    GARANTIA_PROPIA BOOLEAN,
    TOMA_DECISION VARCHAR(255),
    QUE_ESPERA_CREDITO VARCHAR(255),
    DEUDA_SOBRE_PROPIEDAD BOOLEAN,
    MONTO_DEUDA_PROPIEDAD DECIMAL(18, 2),
    IUSI_AL_DIA BOOLEAN,
    TRIMESTRES_ADEUDADOS INT,
    FOREIGN KEY (CODIGO_CLIENTE) REFERENCES Clients(CODIGO_CLIENTE)
);

-- Vehicles Table: Stores details of vehicles, often used as loan collateral.
CREATE TABLE Vehicles (
    ID INT PRIMARY KEY,
    CODIGO_CLIENTE INT,
    DESCRIPCION_BIEN VARCHAR(255),
    PLACA VARCHAR(20),
    POLIZA VARCHAR(100),
    MARCA VARCHAR(100),
    LINEA VARCHAR(100),
    MODELO VARCHAR(100),
    ANIO_VEHICULO INT,
    UBICACION_GARANTIA VARCHAR(255),
    ORIGEN VARCHAR(100),
    ESTADO_VEHICULO VARCHAR(100),
    TIPO_VEHICULO VARCHAR(100),
    ACCESORIOS TEXT,
    MODIFICACION_ESTETICA TEXT,
    DONDE_MANEJA_VEHICULO VARCHAR(255),
    DEUDA_SOBRE_VEHICULO BOOLEAN,
    MONTO_DEUDA_VEHICULO DECIMAL(18, 2),
    VALOR_ESTIMADO_ESPERADO DECIMAL(18, 2),
    IMPUESTO_CIRC_AL_DIA BOOLEAN,
    DIAS_ADEUDADOS INT,
    FOREIGN KEY (CODIGO_CLIENTE) REFERENCES Clients(CODIGO_CLIENTE)
);

-- Financials Table: Detailed financial information and history of clients.
CREATE TABLE Financials (
    ID INT PRIMARY KEY,
    CODIGO_CLIENTE INT,
    EGRESOS_REALES DECIMAL(18, 2),
    INGRESOS_REALES DECIMAL(18, 2),
    DEUDA_EN_SUS_EGRESOS BOOLEAN,
    TIENE_ESTADOS_CUENTA BOOLEAN,
    TIENE_TARJETA_CREDITO BOOLEAN,
    TARJETA_AL_DIA BOOLEAN,
    HA_TENIDO_CREDITOS BOOLEAN,
    NUMERO_CREDITOS_ACTIVOS INT,
    MONTO_TOTAL_ADEUDADO DECIMAL(18, 2),
    CUOTA_MENSUAL_TOTAL DECIMAL(18, 2),
    CAPACIDAD_ENDEUDAMIENTO_DESP_DEUDAS DECIMAL(18, 2),
    CANTIDAD_CUOTAS_ATRASADAS INT,
    POSEE_CUOTAS_ATRASADAS BOOLEAN,
    CAPACIDAD_ENDEUDAMIENTO_DESP_DEUDAS_PORC DECIMAL(5, 2),
    TIPO_CUOTA VARCHAR(50),
    FOREIGN KEY (CODIGO_CLIENTE) REFERENCES Clients(CODIGO_CLIENTE)
);

-- References Table: Information about client references.
CREATE TABLE References (
    ID INT PRIMARY KEY,
    CODIGO_CLIENTE INT,
    NOMBRE_REF1 VARCHAR(255),
    TEL_REF1 VARCHAR(20),
    RELACION_REF1 VARCHAR(100),
    NOMBRE_REF2 VARCHAR(255),
    TEL_REF2 VARCHAR(20),
    RELACION_REF2 VARCHAR(100),
    NOMBRE_REF3 VARCHAR(255),
    TEL_REF3 VARCHAR(20),
    RELACION_REF3 VARCHAR(100),
    REF_PERSONAL1 VARCHAR(255),
    TEL_REF_PERSONAL1 VARCHAR(20),
    REF_PERSONAL2 VARCHAR(255),
    TEL_REF_PERSONAL2 VARCHAR(20),
    REF_PERSONAL3 VARCHAR(255),
    TEL_REF_PERSONAL3 VARCHAR(20),
    FOREIGN KEY (CODIGO_CLIENTE) REFERENCES Clients(CODIGO_CLIENTE)
);

-- Guarantors Table: Information about loan guarantors.
CREATE TABLE Guarantors (
    ID INT PRIMARY KEY,
    CODIGO_CLIENTE INT,
    NOMBRE_AVALISTA VARCHAR(255),
    DPI_AVALISTA VARCHAR(20),
    FOREIGN KEY (CODIGO_CLIENTE) REFERENCES Clients(CODIGO_CLIENTE)
);
